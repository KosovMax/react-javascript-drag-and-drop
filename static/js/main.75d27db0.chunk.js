(this["webpackJsonpreact-drag-and-drop"]=this["webpackJsonpreact-drag-and-drop"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(10),o=n.n(i),c=(n(16),n(7)),d=n(2),s=n(4),u=(n(17),n(8)),l=n(22),f=n(3),g=n.n(f),p=n(11),j=n.n(p),b=n(0),m=function e(t){var n=t.index,r=t.component,a=t.components,i=t.drop,o=t.allowDrop,c=t.removeComponent,d=t.addRow,s=t.removeRow,u=t.moveDrag,l=t.moveDragEnd,f=r.type,g=r.name,p=r.id,j=r.groupId,m=r.leftOrRight;if(-5===f)return Object(b.jsx)("div",{className:"replaceAdd"});if(11===f)return Object(b.jsxs)("div",{className:"ListBoxCard lc","data-type":f,index:n,"data-id":p,children:[Object(b.jsxs)("div",{children:[g," ",Object(b.jsx)("span",{className:"remove",onClick:function(){return c({id:p})},children:"x"})," "]}),Object(b.jsx)("div",{className:"groupDrop",onDrop:i,onDragOver:o,"data-group-id":p,children:a.filter((function(e){return e.groupId===p})).map((function(t,n){return Object(b.jsx)(e,{index:n,component:t,components:a,drop:i,allowDrop:o,removeComponent:c,addRow:d,removeRow:s,moveDrag:u,moveDragEnd:l},n)}))})]});if(11!==f&&-1===m)return Object(b.jsx)("div",{className:"ListBoxCard lc","data-type":f,index:n,"data-id":p,draggable:"true",onDragStart:u,onDragEnd:l,children:Object(b.jsxs)("div",{children:[g,Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{className:"remove",onClick:function(){return c({id:p})},children:"x"}),Object(b.jsx)("span",{onClick:function(){return d(p,j)},children:"+"})]})]})});if(11!==f&&1===m)return Object(b.jsx)(b.Fragment,{});if(11!==f&&0===m){var v=a.findIndex((function(e){return e.id===p})),O=a[v+1],x=O.type,h=O.id,D=O.name;return Object(b.jsxs)("div",{className:"ListBoxCard_flex lc","data-type":-2,index:v,"data-id":-2,children:[Object(b.jsx)("div",{className:"ListBoxCard",children:Object(b.jsxs)("div",{children:[g,Object(b.jsx)("div",{children:Object(b.jsx)("span",{className:"remove",onClick:function(){return c({id:p,nextId:h})},children:"x"})})]})}),14===x&&Object(b.jsxs)("div",{className:"addComponent",onDrop:i,onDragOver:o,"data-update-id":h,children:["SPACE ",Object(b.jsx)("span",{className:"removeRow",onClick:function(){return s(h,p)},children:"-"})]}),14!==x&&Object(b.jsx)("div",{className:"ListBoxCard",children:Object(b.jsxs)("div",{children:[D,Object(b.jsx)("div",{children:Object(b.jsx)("span",{className:"remove",onClick:function(){return s(h,p)},children:"x"})})]})})]})}},v=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)({}),o=Object(s.a)(i,2),f=o[0],p=o[1],v=Object(r.useState)({}),O=Object(s.a)(v,2),x=O[0],h=O[1],D=Object(r.useState)(-1),C=Object(s.a)(D,2),y=C[0],I=(C[1],Object(r.useState)({})),R=Object(s.a)(I,2),N=R[0],w=R[1];Object(r.useEffect)((function(){return function(){p({}),h({})}}),[]),Object(r.useEffect)((function(){console.log(n)}),[n]),Object(r.useEffect)((function(){if(null===f||void 0===f?void 0:f.id){console.log(f);var e=n.findIndex((function(e){return-5===e.type}));a(-1!==e?g()(n,{$splice:[[e,1],[e,0,f]]}):function(e){return[].concat(Object(d.a)(e),[f])})}}),[f]),Object(r.useEffect)((function(){if(null===x||void 0===x?void 0:x.id){console.log(x);var e=x.id,t=x.type,r=n.findIndex((function(t){return t.id===e})),i=g()(n,Object(c.a)({},r,{type:{$set:t},name:{$set:u.find((function(e){return e.id===t})).name}}));a(Object(d.a)(i))}}),[x]);var k=Object(r.useCallback)((function(e){e.preventDefault();var t=e.target.getAttribute("data-type"),r=Number(e.target.getAttribute("index")),i=e.target.getAttribute("data-id"),o="-1",c=e.target.closest("div[data-group-id]").getAttribute("data-group-id");if(c&&(o=c),t){console.log({type:Number(t),index:r,lastIndex:y,id:i});var s=n.filter((function(e){return-1!==e.id})),u=n.findIndex((function(e){return e.id===i})),l={id:-1,type:-5,groupId:o,name:"move card",HalfRow:0,leftOrRight:-1},f=n[u];console.log(f);var p=g()(s,{$splice:[[u,0,l]]});a(Object(d.a)(p))}e.target.style.backgroundColor="";var j="#e2ffde63";e.target.classList.contains("ListBox")&&(e.target.style.backgroundColor=j),e.target.classList.contains("groupDrop")&&(e.target.style.backgroundColor=j),e.target.classList.contains("addComponent")&&(e.target.style.backgroundColor=j)}),[n,N]),L=function(e){e.dataTransfer.setData("CARD",Number(e.target.getAttribute("data-id")))},A=Object(r.useCallback)((function(e){var t=e.target.getAttribute("data-id");console.log("moveDrag"),e.target.style.opacity=.4,w(n.find((function(e){return e.id===t})))}),[n]),S=function(e){e.target.style.opacity=1},B=Object(r.useCallback)((function(e){e.preventDefault(),e.target.style.backgroundColor="";var t=Number(e.dataTransfer.getData("CARD")),r=e.target.getAttribute("data-group-id"),i=e.target.getAttribute("data-update-id");if(null===N||void 0===N?void 0:N.id){t=N.id;console.log({copyComponent:N});var o=n.findIndex((function(e){return e.id===t})),c=n.findIndex((function(e){return-1===e.id}));if(j()(".ListBoxCard").css({opacity:1}),console.log({nowIndex:c}),-1===c){var s=n.filter((function(e){return e.id!==N.id}));a([].concat(Object(d.a)(s),[N]))}else{var f=g()(n,{$splice:[[o,1],[c,0,N]]});a(Object(d.a)(f.filter((function(e){return-1!==e.id}))))}w({})}else{if(r){var b={id:Object(l.a)(),type:t,groupId:r,name:u.find((function(e){return e.id===t})).name,HalfRow:0,leftOrRight:-1};p(b)}i&&h({id:i,type:t})}}),[f,x,N,n]),E=function(e){var t=e.id,r=e.nextId,i=void 0===r?0:r,o=n.filter((function(e){return e.groupId!==t})).filter((function(e){var n=e.id;return n!==t&&n!==i}));a(Object(d.a)(o))},$=function(e,t){var r=n.findIndex((function(t){return t.id===e})),i={id:Object(l.a)(),type:14,groupId:t,name:"Half Row",HalfRow:1,leftOrRight:1},o=g()(n,Object(c.a)({},r,{HalfRow:{$set:1},leftOrRight:{$set:0}})),s=g()(o,{$splice:[[r+1,0,i]]});a(Object(d.a)(s))},T=function(e,t){var r=n.filter((function(t){return t.id!==e})),i=r.findIndex((function(e){return e.id===t})),o=g()(r,Object(c.a)({},i,{HalfRow:{$set:0},leftOrRight:{$set:-1}}));a(Object(d.a)(o))};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"ReactJS with Javascript - Drag and Drop"}),Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)("div",{children:u.map((function(e,t){var n=e.id,r=e.name;return Object(b.jsx)("div",{className:"box",draggable:"true",onDragStart:L,id:"drag_".concat(n),"data-id":n,children:r},t)}))}),Object(b.jsx)("div",{className:"ListBox",onDrop:B,onDragOver:k,onDragLeave:function(e){e.preventDefault();var t=e.target.classList.contains("replaceAdd");t||a(n.filter((function(e){return-5!==e.type}))),console.log(t),e.target.style.backgroundColor=""},"data-group-id":0,children:n.filter((function(e){return"0"===e.groupId})).map((function(e,t){return Object(b.jsx)(m,{index:t,component:e,components:n,drop:B,allowDrop:k,removeComponent:E,addRow:$,removeRow:T,moveDrag:A,moveDragEnd:S},t)}))})]})]})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};o.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(v,{})}),document.getElementById("root")),O()},8:function(e){e.exports=JSON.parse('[{"id":0,"name":"Static Text"},{"id":1,"name":"Text Input"},{"id":2,"name":"Text Area Input"},{"id":3,"name":"Number Input"},{"id":4,"name":"Date"},{"id":5,"name":"Date & Time"},{"id":6,"name":"Time"},{"id":7,"name":"Radio Group"},{"id":8,"name":"Dropdown"},{"id":9,"name":"Initials Input"},{"id":10,"name":"File Upload"},{"id":11,"name":"Group"},{"id":12,"name":"Signature"}]')}},[[20,1,2]]]);
//# sourceMappingURL=main.75d27db0.chunk.js.map